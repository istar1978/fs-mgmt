<div class="container-fluid">
    <div class="row conferences-header">
        <div class="col-md-12">
            <span data-moment-format="Last updated %s." ng-moment-ago="lastRefresh">
            </span>

            <button ng-click="refresh()" class="btn btn-primary" ng-class="{ disabled: isAutoRefreshEnabled }">
                {{ isAutoRefreshEnabled ? "Auto Refreshing.." : "Refresh" }}
            </button>

            <button ng-click="toggleAutoRefresh()" class="btn btn-success" ng-class="{ active: isAutoRefreshEnabled }">
                {{ isAutoRefreshEnabled ? "Disable" : "Enable" }}
            </button>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div ng-repeat="server in servers">
                <h3>{{ server.name }}</h3>

                <div class="alert alert-warning" ng-show="server.error">{{ server.error }}</div>

                <span ng-show="!server.error && server.conferences.length == 0">No conferences on this server</span>

                <div ng-repeat="conference in server.conferences">

                    <div class="list-conference-title">
                        <h4 class="list-conference-name">{{ conference.name }}</h4>

                        <button ng-click="copyToClipboard(conference.name)" class="btn btn-default btn-sm">
                            <span class="glyphicon glyphicon-copy" aria-hidden="true"></span>
                        </button>

                        <button ng-confirm-click="hangup(server, conference, null)"
                                class="btn btn-default btn-sm">Hangup all</button>

                        <button class="btn btn-default btn-sm" style="white-space: nowrap" ng-popover
                                data-container="body" data-toggle="popover" data-placement="right"
                                data-content="{{ conference.flags }}" data-trigger="focus">Show flags</button>

                        <button ng-show="conference.isRecording" ng-click="showRecordingStatus(server, conference)"
                                class="btn btn-default btn-sm">Recording status</button>
                    </div>

                    <table class="table table-bordered table-striped table-hover table-condensed">
                        <thead>
                        <tr>
                            <th>Id</th>
                            <th>Register</th>
                            <th>Channel Id</th>
                            <th>Caller Id</th>
                            <th>Entitlements</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-class="{ success: !member.isInternalCall }" ng-repeat="member in conference.members">
                            <td>{{ member.id }}</td>
                            <td>{{ member.participantRegister }}</td>
                            <td>
                                {{ member.channelId }}
                                <button ng-click="copyToClipboard(member.channelId)" class="btn btn-default btn-xs">
                                    <span class="glyphicon glyphicon-copy" aria-hidden="true"></span>
                                </button>
                            </td>
                            <td>{{ member.callerIdName }}
                                        <span ng-show="member.callerIdNumber" style="color: #888888">
                                            ({{ member.callerIdNumber }})
                                        </span>
                            </td>
                            <td>{{ member.entitlements }}</td>
                            <td>
                                <button ng-confirm-click="hangup(server, conference, member)"
                                        class="btn btn-default btn-xs">Hangup</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>